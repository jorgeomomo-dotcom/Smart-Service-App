 <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙˆØ§ØªØ¨ V19.5 - Ù†Ø³Ø®Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
    <style>
        :root {
            --primary: #0D47A1; --bg: #ECEFF1; --surface: #FFFFFF;
            --success: #2E7D32; --danger: #C62828; --radius: 12px;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: sans-serif; background: var(--bg); margin: 0; padding: 0; direction: rtl; }
        header { background: var(--surface); padding: 12px 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .calendar-container { overflow-x: auto; margin: 10px; background: var(--surface); border-radius: var(--radius); border: 1px solid #CFD8DC; }
        .calendar-grid { display: grid; min-width: max-content; }
        .calendar-grid div { padding: 8px; border: 1px solid #f0f0f0; display: flex; align-items: center; justify-content: center; min-height: 50px; text-align: center; }
        .employee-name-cell { position: sticky; right: 0; background: #F8F9FA; font-weight: bold; z-index: 2; width: 140px; border-left: 3px solid var(--primary) !important; }
        .attendance-cell { cursor: pointer; font-size: 0.85rem; min-width: 60px; transition: 0.2s; position: relative; }
        .status-present { background: #E8F5E9; color: var(--success); }
        .status-absent { background: #FFEBEE; color: var(--danger); font-weight: bold; }
        .status-partial { background: #FFF3E0; color: #EF6C00; }
        .cell-locked::after { content: 'ğŸ”’'; position: absolute; top: 2px; left: 2px; font-size: 9px; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 1000; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(3px); }
        .modal-content { background: white; padding: 25px; border-radius: var(--radius); width: 100%; max-width: 400px; }
        button, select { cursor: pointer; border: none; font-weight: bold; padding: 12px; border-radius: 8px; width: 100%; margin: 5px 0; font-size: 1rem; }
        select { background: #fff; border: 1px solid var(--primary); color: var(--primary); text-align: center; }
        .btn-main { background: var(--primary); color: white; }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; }
        .row-now { display: flex; gap: 5px; align-items: center; }
        .btn-now { background: #FF9800; color: white; width: auto; padding: 10px; flex-shrink: 0; }
        .pin-dot { width: 14px; height: 14px; border-radius: 50%; border: 2px solid var(--primary); margin: 0 4px; }
        .pin-dot.active { background: var(--primary); }
        .pin-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; direction: ltr; }
    </style>
</head>
<body>

<header>
    <div style="display:flex; justify-content:space-between; align-items:center">
        <b style="color:var(--primary)">Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙˆØ§ØªØ¨ V19.5</b>
        <span id="lockStatus" style="font-size:0.8rem; color:red">ğŸ”’ Ù…Ø­Ù…ÙŠ</span>
    </div>
</header>

<div id="contentArea" style="display:none">
    <div style="display:flex; justify-content:space-between; padding:10px; align-items:center">
        <button onclick="changeMonth(-1)" style="width:40px; background:#ddd">â—€</button>
        <b id="monthLabel"></b>
        <button onclick="changeMonth(1)" style="width:40px; background:#ddd">â–¶</button>
    </div>
    
    <div class="calendar-container"><div id="calendarGrid" class="calendar-grid"></div></div>
    
    <div style="padding:15px; background: #fff; margin: 10px; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
        <label style="font-weight: bold; color: var(--primary);">Ø¥Ø±Ø³Ø§Ù„ ÙƒØ´Ù Ø¹Ø§Ù…Ù„:</label>
        <select id="empSelect"><option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¹Ø§Ù…Ù„ --</option></select>
        <button onclick="sendSelectedReport()" style="background:#00796B; color:white">Ø§Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø¢Ø¨</button>
    </div>

    <div style="padding:15px; display:grid; grid-template-columns:1fr 1fr; gap:10px">
        <button class="btn-main" onclick="openAdvances()">ğŸ’° Ø§Ù„ØªØ³Ø¨ÙŠÙ‚Ø§Øª</button>
        <button class="btn-main" onclick="printReport()" style="background:var(--success)">ğŸ“„ Ø·Ø¨Ø§Ø¹Ø© PDF</button>
        <button class="btn-main" onclick="openSettings()" style="background:#546E7A;">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
        <button class="btn-main" onclick="clearAttendanceOnly()" style="background:var(--danger);">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ØªØ£Ø´ÙŠØ±</button>
    </div>
</div>

<div id="pinModal" class="modal" style="display:flex">
    <div class="modal-content" align="center">
        <div id="lockWarning" style="color:red; font-weight:bold; display:none; margin-bottom:10px;">âš ï¸ Ø¹Ø·Ù„ ÙÙŠ Ø§Ù„Ø±Ù…Ø²ØŸ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø§Ø³ØªØ± ÙƒÙˆØ¯ (8 Ø£Ø±Ù‚Ø§Ù…)</div>
        <h3 id="pinTitle">Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
        <div style="display:flex; justify-content:center; margin:20px 0" id="dotsContainer"></div>
        <div class="pin-grid">
            <button onclick="pressPin('1')">1</button><button onclick="pressPin('2')">2</button><button onclick="pressPin('3')">3</button>
            <button onclick="pressPin('4')">4</button><button onclick="pressPin('5')">5</button><button onclick="pressPin('6')">6</button>
            <button onclick="pressPin('7')">7</button><button onclick="pressPin('8')">8</button><button onclick="pressPin('9')">9</button>
            <button onclick="clearPin()" style="background:#ffcdd2">CLR</button>
            <button onclick="pressPin('0')">0</button>
            <button onclick="backspacePin()" style="background:#FFAB91">ğŸ”™</button>
        </div>
        <button onclick="location.reload()" style="background:#eee; margin-top:10px">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
</div>

<div id="attModal" class="modal">
    <div class="modal-content">
        <h3 id="attEmpName" align="center"></h3>
        <div style="background:#f9f9f9; padding:10px; border-radius:8px; margin-bottom:15px; border:1px dashed #ccc">
            <label style="font-size:0.8rem; font-weight:bold">Ø§Ù„Ø£Ø¬Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø§Ù…Ù„:</label>
            <div class="row-now">
                <input type="number" id="currentRateInput" style="margin:0; padding:8px">
                <button onclick="updateEmpRateFromModal()" style="width:auto; padding:8px; background:var(--primary); font-size:0.7rem; color:white;">ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¹ØªÙ…Ø¯</button>
            </div>
        </div>
        <div id="boxIn">
            <label>ÙˆÙ‚Øª Ø§Ù„Ø­Ø¶ÙˆØ±:</label>
            <div class="row-now"><input type="time" id="tIn" value="08:00"><button class="btn-now" onclick="setNow('tIn')">ğŸ•’ Ø§Ù„Ø¢Ù†</button></div>
            <button class="btn-main" onclick="saveAtt('in')">Ø­ÙØ¸ Ø§Ù„Ø­Ø¶ÙˆØ±</button>
        </div>
        <div id="boxOut" style="display:none">
            <label>ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØµØ±Ø§Ù:</label>
            <div class="row-now"><input type="time" id="tOut" value="06:00"><button class="btn-now" onclick="setNow('tOut')">ğŸ•’ Ø§Ù„Ø¢Ù†</button></div>
            <button class="btn-main" onclick="saveAtt('out')" style="background:var(--success)">Ø¥ØªÙ…Ø§Ù… Ø§Ù„ÙŠÙˆÙ…</button>
        </div>
        <button class="btn-main" style="background:var(--danger)" onclick="saveAtt('absent')">ØªØ³Ø¬ÙŠÙ„ ØºÙŠØ§Ø¨</button>
        <button onclick="closeM('attModal')" style="background:#eee">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<div id="settingsModal" class="modal">
    <div class="modal-content">
        <h3>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø­Ù…Ø§ÙŠØ©</h3>
        <div id="eList" style="max-height:150px; overflow-y:auto; border-bottom:1px solid #eee"></div>
        <input id="newE" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ù…Ù„">
        <input id="newR" type="number" placeholder="Ø§Ù„Ø£Ø¬Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠ">
        <button class="btn-main" onclick="addE()">Ø¥Ø¶Ø§ÙØ© Ø¹Ø§Ù…Ù„</button>
        <hr>
        <label>ØªØºÙŠÙŠØ± Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ (4 Ø£Ø±Ù‚Ø§Ù…):</label>
        <input type="password" id="p1" maxlength="4">
        <button onclick="updatePin()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ù…Ø²</button>
        <button onclick="closeM('settingsModal')" style="background:#eee">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<div id="adminEditModal" class="modal"><div class="modal-content"><h3>ğŸ› ï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„</h3><label>Ø¯Ø®ÙˆÙ„:</label><div class="row-now"><input type="time" id="editIn"><button class="btn-now" onclick="setNow('editIn')">ğŸ•’</button></div><label>Ø®Ø±ÙˆØ¬:</label><div class="row-now"><input type="time" id="editOut"><button class="btn-now" onclick="setNow('editOut')">ğŸ•’</button></div><button class="btn-main" onclick="confirmAdminEdit()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</button><button class="btn-main" style="background:var(--danger)" onclick="saveAtt('deleteAdmin')">ğŸ—‘ï¸ Ø­Ø°Ù</button><button onclick="closeM('adminEditModal')" style="background:#eee">Ø±Ø¬ÙˆØ¹</button></div></div>
<div id="advancesModal" class="modal"><div class="modal-content"><h3>ğŸ’° Ø³Ø¬Ù„ Ø§Ù„ØªØ³Ø¨ÙŠÙ‚Ø§Øª</h3><div id="advListArea" style="max-height: 300px; overflow-y: auto;"></div><button onclick="closeM('advancesModal')" style="background:#eee">Ø¥ØºÙ„Ø§Ù‚</button></div></div>

<script>
    let appData = { emps: [], att: {}, pin: "0000", advances: {} };
    const MASTER = "10031945"; 
    let pinIn = "", currDate = new Date(), sel = null, target = "login", fails = 0, locked = false;

    window.onload = () => {
        const saved = localStorage.getItem('salary_v13_offline');
        if(saved) {
            try {
                let parsed = JSON.parse(saved);
                if(!parsed.pin) parsed.pin = "0000";
                appData = parsed;
            } catch(e) {
                console.log("Error loading data, using defaults");
            }
        }
        setupDots(4);
        render();
    };

    function setupDots(n) {
        let h = ''; for(let i=0; i<n; i++) h += '<div class="pin-dot"></div>';
        document.getElementById('dotsContainer').innerHTML = h;
    }

    function pressPin(n) {
        let max = locked ? 8 : 4;
        if(pinIn.length < max) { pinIn += n; updateDots(); if(pinIn.length === max) check(); }
    }

    function backspacePin() { if(pinIn.length > 0) { pinIn = pinIn.slice(0, -1); updateDots(); } }

    function check() {
        if(locked) { 
            if(pinIn === MASTER) {
                locked = false; fails = 0;
                document.getElementById('lockWarning').style.display='none';
                clearPin(); setupDots(4);
                appData.pin = "0000"; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø±Ù…Ø² Ù„Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¹Ù†Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø§Ø³ØªØ± ÙƒÙˆØ¯
                save();
                document.getElementById('contentArea').style.display='block';
                document.getElementById('pinModal').style.display = 'none';
            } else { alert("Ø§Ù„Ù…Ø§Ø³ØªØ± ÙƒÙˆØ¯ Ø®Ø·Ø£!"); clearPin(); }
            return;
        }
        if(pinIn === appData.pin) { fails = 0; success(); } 
        else {
            fails++;
            if(fails >= 3) { 
                locked = true; 
                document.getElementById('lockWarning').style.display='block'; 
                setupDots(8); 
            } else alert("Ø±Ù…Ø² Ø®Ø·Ø£! Ù…ØªØ¨Ù‚ÙŠ " + (3 - fails) + " Ù…Ø­Ø§ÙˆÙ„Ø§Øª.");
            clearPin();
        }
    }

    function success() {
        document.getElementById('pinModal').style.display = 'none';
        if(target === "login") document.getElementById('contentArea').style.display='block';
        else if(target === "edit") openAdminEdit(appData.att[sel.key]);
        clearPin();
    }

    function updateDots() { document.querySelectorAll('.pin-dot').forEach((d, i) => d.className = i < pinIn.length ? 'pin-dot active' : 'pin-dot'); }
    function clearPin() { pinIn = ""; updateDots(); }
    function setNow(id) { let n = new Date(); document.getElementById(id).value = n.getHours().toString().padStart(2,'0') + ":" + n.getMinutes().toString().padStart(2,'0'); }

    function formatTime(m) {
        let h = Math.floor(m/60);
        let min = Math.round(m%60);
        return h + "Ø³ " + min + "Ø¯";
    }

    function render() {
        const months = ["ÙŠÙ†Ø§ÙŠØ±", "ÙØ¨Ø±Ø§ÙŠØ±", "Ù…Ø§Ø±Ø³", "Ø£Ø¨Ø±ÙŠÙ„", "Ù…Ø§ÙŠÙˆ", "ÙŠÙˆÙ†ÙŠÙˆ", "ÙŠÙˆÙ„ÙŠÙˆ", "Ø£ØºØ³Ø·Ø³", "Ø³Ø¨ØªÙ…Ø¨Ø±", "Ø£ÙƒØªÙˆØ¨Ø±", "Ù†ÙˆÙÙ…Ø¨Ø±", "Ø¯ÙŠØ³Ù…Ø¨Ø±"];
        document.getElementById('monthLabel').innerText = months[currDate.getMonth()] + " " + currDate.getFullYear();
        const grid = document.getElementById('calendarGrid');
        const days = new Date(currDate.getFullYear(), currDate.getMonth()+1, 0).getDate();
        grid.style.gridTemplateColumns = `140px repeat(${days}, 60px)`;
        grid.innerHTML = '<div></div>';
        for(let d=1; d<=days; d++) { grid.innerHTML += `<div><b>${d}</b></div>`; }
        
        const select = document.getElementById('empSelect');
        select.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø¹Ø§Ù…Ù„ --</option>';

        appData.emps.forEach(e => {
            select.innerHTML += `<option value="${e.id}">${e.name}</option>`;
            grid.innerHTML += `<div class="employee-name-cell">${e.name}</div>`;
            for(let d=1; d<=days; d++) {
                let key = `${currDate.getFullYear()}-${currDate.getMonth()}-${d}-${e.id}`;
                let data = appData.att[key], txt = '-', cls = 'attendance-cell';
                if(data) {
                    cls += ' cell-locked';
                    if(data.tOut) { cls += ' status-present'; txt = formatTime(data.mTotal); }
                    else if(data.tIn) { cls += ' status-partial'; txt = 'Ø­'; }
                    else if(data.abs) { cls += ' status-absent'; txt = 'âœ•'; }
                }
                grid.innerHTML += `<div class="${cls}" onclick="handleCellClick('${e.id}', ${d}, '${key}')">${txt}</div>`;
            }
        });
    }

    window.handleCellClick = (empId, day, key) => {
        let selectedDate = new Date(currDate.getFullYear(), currDate.getMonth(), day);
        let today = new Date(); today.setHours(0, 0, 0, 0);
        if (selectedDate > today) { alert("âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ£Ø´ÙŠØ± Ø¹Ù„Ù‰ Ø£ÙŠØ§Ù… Ù‚Ø§Ø¯Ù…Ø©!"); return; }
        sel = { e: appData.emps.find(x=>x.id==empId), d: day, key: key };
        if(appData.att[key]) { openAdminEdit(appData.att[key]); } 
        else { openAttendanceBox(); }
    };

    function openAttendanceBox() {
        document.getElementById('attEmpName').innerText = sel.e.name;
        document.getElementById('currentRateInput').value = sel.e.rate;
        document.getElementById('boxIn').style.display='block'; 
        document.getElementById('boxOut').style.display='none';
        document.getElementById('attModal').style.display='flex'; 
    }

    function updateEmpRateFromModal() {
        let newRate = parseFloat(document.getElementById('currentRateInput').value);
        if(!isNaN(newRate)) { sel.e.rate = newRate; alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø¬Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠ."); save(); }
    }

    function saveAtt(type) {
        if(type === 'in') {
            appData.att[sel.key] = { tIn: document.getElementById('tIn').value, rate: sel.e.rate };
            document.getElementById('boxIn').style.display='none'; document.getElementById('boxOut').style.display='block';
        } else if(type === 'out') {
            let d = appData.att[sel.key];
            let tOutVal = document.getElementById('tOut').value;
            let sArr = d.tIn.split(':'), eArr = tOutVal.split(':');
            let sMin = parseInt(sArr[0])*60 + parseInt(sArr[1]);
            let eMin = parseInt(eArr[0])*60 + parseInt(eArr[1]);
            let diff = (eMin < sMin) ? (1440 - sMin) + eMin : eMin - sMin;
            d.tOut = tOutVal; d.mTotal = diff;
            closeM('attModal');
        } else if(type === 'absent') { appData.att[sel.key] = { abs: true }; closeM('attModal'); }
        else if(type === 'deleteAdmin') { delete appData.att[sel.key]; closeM('adminEditModal'); }
        save();
    }

    function openAdminEdit(data) {
        document.getElementById('editIn').value = data.tIn || "08:00";
        document.getElementById('editOut').value = data.tOut || "06:00";
        document.getElementById('adminEditModal').style.display='flex';
    }

    function confirmAdminEdit() {
        let i = document.getElementById('editIn').value, o = document.getElementById('editOut').value;
        let sArr = i.split(':'), eArr = o.split(':');
        let sMin = parseInt(sArr[0])*60 + parseInt(sArr[1]);
        let eMin = parseInt(eArr[0])*60 + parseInt(eArr[1]);
        let diff = (eMin < sMin) ? (1440 - sMin) + eMin : eMin - sMin;
        appData.att[sel.key] = { tIn: i, tOut: o, mTotal: diff, rate: sel.e.rate };
        save(); closeM('adminEditModal');
    }

    function clearAttendanceOnly() {
        if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±ØŸ")) {
            appData.att = {}; appData.advances = {}; save(); location.reload();
        }
    }

    function openSettings() {
        document.getElementById('eList').innerHTML = appData.emps.map(e => `<div style="display:flex; justify-content:space-between; padding:5px; border-bottom:1px solid #eee"><span>${e.name}</span> <button onclick="delE('${e.id}')" style="width:auto; padding:2px 10px; background:red; color:white">Ø­Ø°Ù</button></div>`).join('');
        document.getElementById('settingsModal').style.display='flex';
    }

    function updatePin() {
        let val = document.getElementById('p1').value;
        if(val.length === 4) { appData.pin = val; alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ù…Ø²."); save(); }
    }

    function addE() { let n = document.getElementById('newE').value, r = document.getElementById('newR').value; if(n && r) { appData.emps.push({id: Date.now(), name: n, rate: parseFloat(r)}); save(); openSettings(); } }
    function delE(id) { appData.emps = appData.emps.filter(e => e.id != id); save(); openSettings(); }
    
    function openAdvances() {
        const area = document.getElementById('advListArea'), mk = `${currDate.getFullYear()}-${currDate.getMonth()}`;
        if(!appData.advances[mk]) appData.advances[mk] = {};
        area.innerHTML = appData.emps.map(e => {
            let h = appData.advances[mk][e.id] || [];
            return `<div style="border:1px solid #ccc; padding:10px; margin-bottom:5px; border-radius:8px"><b>${e.name}</b>
                    <div style="display:flex; gap:2px; margin-top:5px"><input type="date" id="d_${e.id}"><input type="number" id="v_${e.id}" style="width:80px" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº"><button onclick="addAdv('${e.id}')" style="width:40px; background:green; color:white">+</button></div>
                    ${h.map((x,idx)=>`<div style="font-size:0.8rem">${x.date}: ${x.val} Ø¯Ø¬ <span onclick="delAdv('${e.id}',${idx})" style="color:red; cursor:pointer">âœ–</span></div>`).join('')}</div>`;
        }).join('');
        document.getElementById('advancesModal').style.display='flex';
    }

    function addAdv(id) {
        let d = document.getElementById('d_'+id).value, v = document.getElementById('v_'+id).value, mk = `${currDate.getFullYear()}-${currDate.getMonth()}`;
        if(d && v) { if(!appData.advances[mk][id]) appData.advances[mk][id] = []; appData.advances[mk][id].push({date:d, val:parseFloat(v)}); save(); openAdvances(); }
    }
    function delAdv(eId, idx) { let mk = `${currDate.getFullYear()}-${currDate.getMonth()}`; appData.advances[mk][eId].splice(idx, 1); save(); openAdvances(); }
    function save() { localStorage.setItem('salary_v13_offline', JSON.stringify(appData)); render(); }
    function closeM(id) { document.getElementById(id).style.display = 'none'; }
    function changeMonth(n) { currDate.setMonth(currDate.getMonth() + n); render(); }

    function sendSelectedReport() {
        const empId = document.getElementById('empSelect').value;
        if (!empId) { alert("âŒ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø§Ù…Ù„ Ø£ÙˆÙ„Ø§Ù‹!"); return; }
        let mk = `${currDate.getFullYear()}-${currDate.getMonth()}`;
        let e = appData.emps.find(x => x.id == empId);
        let rateGroups = {}; let totalEarned = 0;
        let days = new Date(currDate.getFullYear(), currDate.getMonth()+1, 0).getDate();
        for(let d=1; d<=days; d++) {
            let key = `${currDate.getFullYear()}-${currDate.getMonth()}-${d}-${e.id}`;
            let record = appData.att[key];
            if(record 
